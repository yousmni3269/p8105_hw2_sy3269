p8105_hw2_sy3269.Rmd
================
Soomin You
2024-09-25

Required packages (e.g.`tidyverse` and `readxl`) are installed.

# Problem 1

Import and clean NYC subway data. Then convert the entry variable from
character to a logical variable.

``` r
metro_df = 
  read_csv("./NYC_Transit_Subway_Entrance_And_Exit_Data.csv",  na = c("NA", "", ".")) |>
  janitor::clean_names() |>
  select(line:route11, entry, vending, entrance_type, ada) |>
  mutate(
    entry = case_match(
      entry, 
      "YES" ~ TRUE,
      "NO" ~ FALSE
    ))
```

    ## Rows: 1868 Columns: 32
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## chr (22): Division, Line, Station Name, Route1, Route2, Route3, Route4, Rout...
    ## dbl  (8): Station Latitude, Station Longitude, Route8, Route9, Route10, Rout...
    ## lgl  (2): ADA, Free Crossover
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

``` r
metro_df
```

    ## # A tibble: 1,868 × 19
    ##    line     station_name station_latitude station_longitude route1 route2 route3
    ##    <chr>    <chr>                   <dbl>             <dbl> <chr>  <chr>  <chr> 
    ##  1 4 Avenue 25th St                  40.7             -74.0 R      <NA>   <NA>  
    ##  2 4 Avenue 25th St                  40.7             -74.0 R      <NA>   <NA>  
    ##  3 4 Avenue 36th St                  40.7             -74.0 N      R      <NA>  
    ##  4 4 Avenue 36th St                  40.7             -74.0 N      R      <NA>  
    ##  5 4 Avenue 36th St                  40.7             -74.0 N      R      <NA>  
    ##  6 4 Avenue 45th St                  40.6             -74.0 R      <NA>   <NA>  
    ##  7 4 Avenue 45th St                  40.6             -74.0 R      <NA>   <NA>  
    ##  8 4 Avenue 45th St                  40.6             -74.0 R      <NA>   <NA>  
    ##  9 4 Avenue 45th St                  40.6             -74.0 R      <NA>   <NA>  
    ## 10 4 Avenue 53rd St                  40.6             -74.0 R      <NA>   <NA>  
    ## # ℹ 1,858 more rows
    ## # ℹ 12 more variables: route4 <chr>, route5 <chr>, route6 <chr>, route7 <chr>,
    ## #   route8 <dbl>, route9 <dbl>, route10 <dbl>, route11 <dbl>, entry <lgl>,
    ## #   vending <chr>, entrance_type <chr>, ada <lgl>

The NYC metro data set contains line, station name, station location
(latitude and longitude), routes served, entry and vending availability,
entrance type, and ada compliance information. The data set was first
imported and cleaned using a `janitor::clean_names` function. Then only
the required variables were listed out to remove unnecessary information
from the data set. The dimension of the data set is 1868 x 19. The data
set is in human readable form but not yet tidy.

``` r
unique_stn = distinct(metro_df, station_name, line, ada)
ada_stn = filter(unique_stn, ada == TRUE)
```

There are 465 distinct stations and there are 84 ADA compliant stations.

``` r
nv_stn = filter(metro_df, vending == "NO")
nv_entry_stn = filter(nv_stn, entry == TRUE)
```

69 stations out of 183 stations without vending allow entrance. The
proportion is about 2.6521739.

``` r
new_metro_df = 
  read_csv("./NYC_Transit_Subway_Entrance_And_Exit_Data.csv", na = c("NA", "", ".")) |>
  janitor::clean_names() |> 
  mutate(
    route7 = as.character(route7),
    route8 = as.character(route8),
    route9 = as.character(route9),
    route10 = as.character(route10),
    route11 = as.character(route11)
  ) |> 
  select(line, station_name, route1:route11, entry, vending, entrance_type, ada) |>
  pivot_longer( 
    cols = route1:route11,
    names_to = "route_number",
    values_to = "route_name",
    names_prefix = "route"
  )
```

    ## Rows: 1868 Columns: 32
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## chr (22): Division, Line, Station Name, Route1, Route2, Route3, Route4, Rout...
    ## dbl  (8): Station Latitude, Station Longitude, Route8, Route9, Route10, Rout...
    ## lgl  (2): ADA, Free Crossover
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

The data set was reformatted so that `route number` and `route name` are
distinct variables.

``` r
stn_for_A = distinct(new_metro_df, route_name == "A", ada) 
stn_for_A_ada = filter(stn_for_A, ada == TRUE)
```

There are 6 stations that serve the A train and 3 of these stations are
ADA compliant.

# Problem 2

Import and clean the Mr. Trash Wheel data.

``` r
mr_tw_df = read_excel(
  "./202309 Trash Wheel Collection Data.xlsx", sheet = "Mr. Trash Wheel", 
  skip = 1, 
  n_max = 584,
  na = c("NA", "", ".")) |>
  janitor::clean_names() |>
  mutate(
    sports_balls = as.integer(sports_balls),
    year = as.integer(year))
```

    ## New names:
    ## • `` -> `...15`
    ## • `` -> `...16`

``` r
mr_tw_df = 
  select(mr_tw_df, -starts_with("x")) |> 
  mutate(trash_wheel_type = "mr_trash_wheel")
```

Similarly, import and clean Professor Trash Wheel and Gwynnda Trash
Wheel. Then, combine with the Mr. Trash Wheel data set.

``` r
prof_tw_df = 
  read_excel("./202309 Trash Wheel Collection Data.xlsx", sheet = "Professor Trash Wheel", 
  skip = 1, 
  n_max = 106, 
  na = c("NA", "", ".")) |>
  janitor::clean_names() |>
  mutate(
    sports_balls = NA, 
    trash_wheel_type = "professor_trash_wheel") 

gwyn_tw_df = read_excel(
  "./202309 Trash Wheel Collection Data.xlsx", sheet = "Gwynnda Trash Wheel", 
  skip = 1, 
  n_max = 154,
  na = c("NA", "", ".")) |>
  janitor::clean_names() |>
  mutate(
    glass_bottles = NA,
    sports_balls = NA, 
    trash_wheel_type = "gwynnda_trash_wheel")

comb_tw_df = bind_rows(prof_tw_df, gwyn_tw_df, mr_tw_df)
```

To combine the data sets into one, I added two additional columns for
glass bottles and sports balls to `gwyn_tw_df` data set and one column
for sports balls to `prof_tw_df` data set. Then, for all three types of
data set, I added a new variable named `trash_wheel_type` to keep track
of which trash wheel data is which.

``` r
trash_types = 
  select(comb_tw_df, plastic_bottles:sports_balls) |>
  names()

wgt_prof_tw_df = 
  select(prof_tw_df, weight_tons) |>
  sum()

wgt_gwyn_tw_df = select(gwyn_tw_df, weight_tons) |>
  sum()

wgt_mr_tw_df = select(mr_tw_df, weight_tons) |>
  sum()

cb_comb_tw_df = 
  comb_tw_df |>
  select(cigarette_butts) |>
  sum()
  
cb_gwyn_tw_df = 
  gwyn_tw_df |>
  filter(year == 2022, month == "June") |>
  select(cigarette_butts) |>
  sum()
```

In a data set where Professor Trash Wheel, Gwynnda Trash Wheel and
Mr. Trash Wheel data all combined, there are total 844 observations,
where 106, 154, and 584 observations came from each respective data set.
There are 8 types of trash collected by the Trash Wheels and they are as
follows: plastic_bottles, polystyrene, cigarette_butts, glass_bottles,
plastic_bags, wrappers, homes_powered, sports_balls.

The total weight of trash collected by Professor Trash Wheel is 216.26
tons whereas Gwynnda Trash Wheel and Mr. Trash Wheel collected 448.77
tons and 1875.1 tons, respectively.

The total number of cigarette butts collected by three Trash Wheels are
NA and Gwynnda collected 1.812^{4} cigarette butts in June of 2022.

# Problem 3
